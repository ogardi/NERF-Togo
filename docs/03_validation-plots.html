<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.2.3 Parcelles de validation | _main.utf8</title>
  <meta name="description" content="République Togolaise —<br />
Système Nationale de Surveillance des Forêts</div>" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="2.2.3 Parcelles de validation | _main.utf8" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ogardi.github.io/SNSF-Togo" />
  <meta property="og:image" content="https://ogardi.github.io/SNSF-Togoimages/NERF-Togo.png" />
  
  <meta name="github-repo" content="ogardi/NERF-Togo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.2.3 Parcelles de validation | _main.utf8" />
  
  
  <meta name="twitter:image" content="https://ogardi.github.io/SNSF-Togoimages/NERF-Togo.png" />

<meta name="author" content="Oliver Gardi, Fifonsi Dangbo, Sophie Dzigbod, Ditorgue Bakabima" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="02_training-plots.html"/>
<link rel="next" href="04_outil-QGIS.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://ogardi.github.io/SNSF-Togo"><b>Manuel SNSF Togo</b><br>NRF v1.1 ( <i>en révision</i> )</a></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Préface</a></li>
<li class="chapter" data-level="1" data-path="00_introduction.html"><a href="00_introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="01_arrangements.html"><a href="01_arrangements.html"><i class="fa fa-check"></i><b>1.1</b> Arrangements institutionelles</a></li>
<li class="chapter" data-level="1.2" data-path="02_how-to.html"><a href="02_how-to.html"><i class="fa fa-check"></i><b>1.2</b> Pour commencer</a><ul>
<li class="chapter" data-level="1.2.1" data-path="02_how-to.html"><a href="02_how-to.html#travailler-avec-le-snsf"><i class="fa fa-check"></i><b>1.2.1</b> Travailler avec le SNSF</a></li>
<li class="chapter" data-level="1.2.2" data-path="03_commencer.html"><a href="03_commencer.html"><i class="fa fa-check"></i><b>1.2.2</b> Structure du répértoire</a></li>
<li class="chapter" data-level="1.2.3" data-path="03_commencer.html"><a href="03_commencer.html#creation-dun-nouveau-projet"><i class="fa fa-check"></i><b>1.2.3</b> Création d’un nouveau projet</a></li>
<li class="chapter" data-level="1.2.4" data-path="03_commencer.html"><a href="03_commencer.html#NRF-set-up.R"><i class="fa fa-check"></i><b>1.2.4</b> Définition des variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="00_STSS.html"><a href="00_STSS.html"><i class="fa fa-check"></i><b>2</b> Système de Surveillance Terrestre</a><ul>
<li class="chapter" data-level="2.1" data-path="01_Landsat.html"><a href="01_Landsat.html"><i class="fa fa-check"></i><b>2.1</b> Données de base</a><ul>
<li class="chapter" data-level="2.1.1" data-path="01_Landsat.html"><a href="01_Landsat.html#SSTS-Landsat"><i class="fa fa-check"></i><b>2.1.1</b> Images Landsat</a></li>
<li class="chapter" data-level="2.1.2" data-path="02_Worldclim.html"><a href="02_Worldclim.html"><i class="fa fa-check"></i><b>2.1.2</b> WorldClim</a></li>
<li class="chapter" data-level="2.1.3" data-path="03_SRTM.html"><a href="03_SRTM.html"><i class="fa fa-check"></i><b>2.1.3</b> SRTM</a></li>
<li class="chapter" data-level="2.1.4" data-path="04_SoilGrids.html"><a href="04_SoilGrids.html"><i class="fa fa-check"></i><b>2.1.4</b> SoilGrids</a></li>
<li class="chapter" data-level="2.1.5" data-path="05_ProREDD.html"><a href="05_ProREDD.html"><i class="fa fa-check"></i><b>2.1.5</b> ProREDD</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="01_sampling-grid.html"><a href="01_sampling-grid.html"><i class="fa fa-check"></i><b>2.2</b> Collecte des données</a><ul>
<li class="chapter" data-level="2.2.1" data-path="01_sampling-grid.html"><a href="01_sampling-grid.html#reseau-dechantillonnage"><i class="fa fa-check"></i><b>2.2.1</b> Réseau d’échantillonnage</a></li>
<li class="chapter" data-level="2.2.2" data-path="02_training-plots.html"><a href="02_training-plots.html"><i class="fa fa-check"></i><b>2.2.2</b> Parcelles d’entraînement</a></li>
<li class="chapter" data-level="2.2.3" data-path="03_validation-plots.html"><a href="03_validation-plots.html"><i class="fa fa-check"></i><b>2.2.3</b> Parcelles de validation</a></li>
<li class="chapter" data-level="2.2.4" data-path="04_outil-QGIS.html"><a href="04_outil-QGIS.html"><i class="fa fa-check"></i><b>2.2.4</b> Outil QGIS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="00_IFN.html"><a href="00_IFN.html"><i class="fa fa-check"></i><b>3</b> Inventaire Forestier National</a><ul>
<li class="chapter" data-level="3.1" data-path="01_IFN-1.html"><a href="01_IFN-1.html"><i class="fa fa-check"></i><b>3.1</b> IFN-1 (2015/16)</a><ul>
<li class="chapter" data-level="3.1.1" data-path="01_IFN-1.html"><a href="01_IFN-1.html#methode"><i class="fa fa-check"></i><b>3.1.1</b> <span>Méthode</span></a></li>
<li class="chapter" data-level="3.1.2" data-path="01_IFN-1.html"><a href="01_IFN-1.html#donnees"><i class="fa fa-check"></i><b>3.1.2</b> Données</a></li>
<li class="chapter" data-level="3.1.3" data-path="01_IFN-1.html"><a href="01_IFN-1.html#resultats"><i class="fa fa-check"></i><b>3.1.3</b> <span>Résultats</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="00_NRF-MRV.html"><a href="00_NRF-MRV.html"><i class="fa fa-check"></i><b>4</b> Analyses NRF/MRV</a><ul>
<li class="chapter" data-level="4.1" data-path="00_analyse-FCC.html"><a href="00_analyse-FCC.html"><i class="fa fa-check"></i><b>4.1</b> Analyse surfaces forestiers</a><ul>
<li class="chapter" data-level="4.1.1" data-path="01_create-FC-maps.html"><a href="01_create-FC-maps.html"><i class="fa fa-check"></i><b>4.1.1</b> Production des cartes Forêt/Non-Forêt</a></li>
<li class="chapter" data-level="4.1.2" data-path="02_clean-FC-maps.html"><a href="02_clean-FC-maps.html"><i class="fa fa-check"></i><b>4.1.2</b> Nettoyage des cartes brutes</a></li>
<li class="chapter" data-level="4.1.3" data-path="03_validate-FC-maps.html"><a href="03_validate-FC-maps.html"><i class="fa fa-check"></i><b>4.1.3</b> Validation des cartes</a></li>
<li class="chapter" data-level="4.1.4" data-path="04_FC-maps-accuracy.html"><a href="04_FC-maps-accuracy.html"><i class="fa fa-check"></i><b>4.1.4</b> Analyse de la précision</a></li>
<li class="chapter" data-level="4.1.5" data-path="05_analyse-FC-maps.html"><a href="05_analyse-FC-maps.html"><i class="fa fa-check"></i><b>4.1.5</b> Analyse des cartes</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="00_analyse-AGB.html"><a href="00_analyse-AGB.html"><i class="fa fa-check"></i><b>4.2</b> Analyse biomasse aérienne</a><ul>
<li class="chapter" data-level="4.2.1" data-path="01_compile-IFN.html"><a href="01_compile-IFN.html"><i class="fa fa-check"></i><b>4.2.1</b> Analyse des données IFN</a></li>
<li class="chapter" data-level="4.2.2" data-path="02_create-AGB-maps.html"><a href="02_create-AGB-maps.html"><i class="fa fa-check"></i><b>4.2.2</b> Calibration et prédiction</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="00_analyse-ER.html"><a href="00_analyse-ER.html"><i class="fa fa-check"></i><b>4.3</b> Analyse émissions/séquestrations</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/ogardi/SNSF-Togo">Dépôt du code sur GitHub</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><div class="line-block">République Togolaise —<br />
Système Nationale de Surveillance des Forêts</div></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="SSTS-validation-plots" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Parcelles de validation</h3>
<div id="echantillonnage-1" class="section level4">
<h4><span class="header-section-number">2.2.3.1</span> Échantillonnage</h4>
<p>La sélection des parcelles de validation est basée sur les cartes forêt/non-forêt, notamment leurs transitions entre les années 1987 – 2003 – 2015 – 2018. Tout d’abord les transitions sont déterminées pour chaque point du réseau d’échantillonnage. Ensuite un échantillon aléatoire stratifié est tirré avec une répartition de l’échantillon aux strates (transitions) qui est la valeur moyenne d’une répartition proportionnelle à la taille des strates et d’une répartion égale.</p>
</div>
<div id="SSTS-occupation-terres" class="section level4">
<h4><span class="header-section-number">2.2.3.2</span> Occupation des terres</h4>
<p>L’occupation des terres et le changement de l’occupation des terres est <strong>déterminé sur base des images Landsat</strong>. Trois différentes catégories sont distingués:</p>
<ul>
<li>forêt (couverture houppier ≥ 30%)</li>
<li>terre boisée (couverture houppier entre 10% et 30%)</li>
<li>non-forêt (couverture houppier &lt; 10%)</li>
</ul>
<p><strong>La couverture des houppiers est utilisé pour détérminer l’occupation des terres sur l’image Landsat de la date correspondate.</strong> À partir de cette référence, l’occupation des terres est détérminé pour les autres dates de référence 1987 – 2003 – 2015 – 2018. La figure suivante illustre la procédure:</p>
<p><img src="images/SSTS-land-cover.png" /></p>
</div>
<div id="script-r-01_ssts02_bdd_srccreate-val-plots.r" class="section level4 unnumbered">
<h4>Script R: <code>01_SSTS/02_BdD/_src/create-val-plots.R</code></h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co">###############################################################################</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co"># create-val-points.R: Créer un ensemble de parcelles de validation</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co"># -----------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># Bern University of Applied Sciences</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co"># Oliver Gardi, &lt;oliver.gardi@bfh.ch&gt;</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co"># 13 Mai 2020</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co"># Préparation des variables ===================================================</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"></a>
<a class="sourceLine" id="cb14-10" data-line-number="10">OUT.DIR &lt;-<span class="st"> </span><span class="kw">paste0</span>(DIR.SST.BDD, <span class="st">&quot;/03_val-plots/empty&quot;</span>)</a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="cf">if</span>(<span class="op">!</span><span class="kw">dir.exists</span>(OUT.DIR)) <span class="kw">dir.create</span>(OUT.DIR, <span class="dt">recursive=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-12" data-line-number="12"></a>
<a class="sourceLine" id="cb14-13" data-line-number="13">IN.DIR &lt;-<span class="st"> </span><span class="kw">paste0</span>(DIR.MRV.MCF, <span class="st">&quot;/2_raw-maps/FC30/TGO&quot;</span>)</a>
<a class="sourceLine" id="cb14-14" data-line-number="14"></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co"># Fusionner les cartes des années de référence (1987, 2003, 2015 et 2018)</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16">maps &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="kw">raster</span>(<span class="kw">paste0</span>(IN.DIR, <span class="st">&quot;/TGO_1987_F30r.tif&quot;</span>)),</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">              <span class="kw">raster</span>(<span class="kw">paste0</span>(IN.DIR, <span class="st">&quot;/TGO_2003_F30r.tif&quot;</span>)),</a>
<a class="sourceLine" id="cb14-18" data-line-number="18">              <span class="kw">raster</span>(<span class="kw">paste0</span>(IN.DIR, <span class="st">&quot;/TGO_2015_F30r.tif&quot;</span>)),</a>
<a class="sourceLine" id="cb14-19" data-line-number="19">              <span class="kw">raster</span>(<span class="kw">paste0</span>(IN.DIR, <span class="st">&quot;/TGO_2018_F30r.tif&quot;</span>)))</a>
<a class="sourceLine" id="cb14-20" data-line-number="20"></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co"># Créer carte des changements (p.ex. FFFN pour déforestation entre 2015 et 2018)</span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22">change.map &lt;-<span class="st"> </span>maps[[<span class="dv">1</span>]] <span class="op">+</span><span class="st"> </span>maps[[<span class="dv">2</span>]]<span class="op">*</span><span class="dv">10</span> <span class="op">+</span><span class="st"> </span>maps[[<span class="dv">3</span>]]<span class="op">*</span><span class="dv">100</span> <span class="op">+</span><span class="st"> </span>maps[[<span class="dv">4</span>]]<span class="op">*</span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co"># Charger la grille d&#39;échantillonnage du SSTS</span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25">frame.points &lt;-<span class="st"> </span><span class="kw">readOGR</span>(<span class="kw">paste0</span>(DIR.SST.BDD, <span class="st">&quot;/01_reseau-SSTS/TGO_frame_480m.shp&quot;</span>))</a>
<a class="sourceLine" id="cb14-26" data-line-number="26"></a>
<a class="sourceLine" id="cb14-27" data-line-number="27"><span class="co"># Extraire la transition pour chaque parcelle</span></a>
<a class="sourceLine" id="cb14-28" data-line-number="28">frame.points<span class="op">$</span>trans  &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw">extract</span>(change.map, frame.points)</a>
<a class="sourceLine" id="cb14-29" data-line-number="29"></a>
<a class="sourceLine" id="cb14-30" data-line-number="30"></a>
<a class="sourceLine" id="cb14-31" data-line-number="31"><span class="co"># Allocation des points de validation =========================================</span></a>
<a class="sourceLine" id="cb14-32" data-line-number="32"></a>
<a class="sourceLine" id="cb14-33" data-line-number="33">n &lt;-<span class="st"> </span><span class="dv">4000</span>                              <span class="co"># la taille de l&#39;échantillon   </span></a>
<a class="sourceLine" id="cb14-34" data-line-number="34">alloc &lt;-<span class="st"> </span><span class="kw">freq</span>(change.map)[<span class="dv">1</span><span class="op">:</span><span class="dv">16</span>,]       <span class="co"># fréquence des transitions (p. ex FFFN)</span></a>
<a class="sourceLine" id="cb14-35" data-line-number="35"></a>
<a class="sourceLine" id="cb14-36" data-line-number="36"><span class="co"># Allocation proportionelle et égale</span></a>
<a class="sourceLine" id="cb14-37" data-line-number="37">alloc &lt;-<span class="st"> </span><span class="kw">cbind</span>(alloc, </a>
<a class="sourceLine" id="cb14-38" data-line-number="38">               <span class="dt">prop=</span><span class="kw">round</span>(n<span class="op">*</span>alloc[,<span class="st">&quot;count&quot;</span>]<span class="op">/</span><span class="kw">sum</span>(alloc[,<span class="st">&quot;count&quot;</span>])),    </a>
<a class="sourceLine" id="cb14-39" data-line-number="39">               <span class="dt">equal=</span><span class="kw">round</span>(n<span class="op">/</span><span class="kw">nrow</span>(alloc))) </a>
<a class="sourceLine" id="cb14-40" data-line-number="40"></a>
<a class="sourceLine" id="cb14-41" data-line-number="41"><span class="co"># Allocation balancée (moyenne entre proportionelle et égale)</span></a>
<a class="sourceLine" id="cb14-42" data-line-number="42">alloc &lt;-<span class="st"> </span><span class="kw">cbind</span>(alloc, </a>
<a class="sourceLine" id="cb14-43" data-line-number="43">               <span class="dt">balanced=</span><span class="kw">round</span>((alloc[,<span class="st">&quot;prop&quot;</span>] <span class="op">+</span><span class="st"> </span>alloc[,<span class="st">&quot;equal&quot;</span>])<span class="op">/</span><span class="st"> </span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb14-44" data-line-number="44"></a>
<a class="sourceLine" id="cb14-45" data-line-number="45"></a>
<a class="sourceLine" id="cb14-46" data-line-number="46"><span class="co"># Echantillonnage des parcelles de validation ================================</span></a>
<a class="sourceLine" id="cb14-47" data-line-number="47"></a>
<a class="sourceLine" id="cb14-48" data-line-number="48"><span class="co"># Ajoute les attributs des parcelles d&#39;entraînement</span></a>
<a class="sourceLine" id="cb14-49" data-line-number="49">train.plots         &lt;-<span class="st"> </span><span class="kw">readOGR</span>(<span class="kw">paste0</span>(DIR.SST.BDD, <span class="st">&quot;/02_train-plots/assessed/COV_parcelles.shp&quot;</span>))</a>
<a class="sourceLine" id="cb14-50" data-line-number="50">frame.points        &lt;-<span class="st"> </span><span class="kw">merge</span>(frame.points, </a>
<a class="sourceLine" id="cb14-51" data-line-number="51">                             train.plots<span class="op">@</span>data[,<span class="kw">c</span>(<span class="st">&quot;PLOTID&quot;</span>, <span class="st">&quot;img_date&quot;</span>, <span class="st">&quot;img_src&quot;</span>, <span class="st">&quot;mod_date&quot;</span>, <span class="st">&quot;author&quot;</span>, <span class="st">&quot;ccov&quot;</span>)], </a>
<a class="sourceLine" id="cb14-52" data-line-number="52">                             <span class="dt">by=</span><span class="st">&quot;PLOTID&quot;</span>, <span class="dt">all.x=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-53" data-line-number="53"></a>
<a class="sourceLine" id="cb14-54" data-line-number="54"><span class="co"># Créer une couche de points vide</span></a>
<a class="sourceLine" id="cb14-55" data-line-number="55">val.points &lt;-<span class="st"> </span>frame.points[<span class="dv">0</span>,]</a>
<a class="sourceLine" id="cb14-56" data-line-number="56"></a>
<a class="sourceLine" id="cb14-57" data-line-number="57"><span class="co"># Initialiser le générateur de nombres aléatoires</span></a>
<a class="sourceLine" id="cb14-58" data-line-number="58"><span class="kw">set.seed</span>(RSEED)</a>
<a class="sourceLine" id="cb14-59" data-line-number="59"></a>
<a class="sourceLine" id="cb14-60" data-line-number="60"><span class="co"># Pour chaque transition ...</span></a>
<a class="sourceLine" id="cb14-61" data-line-number="61"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(alloc)) {</a>
<a class="sourceLine" id="cb14-62" data-line-number="62">  </a>
<a class="sourceLine" id="cb14-63" data-line-number="63">  strat.n &lt;-<span class="st">  </span>alloc[i, <span class="st">&quot;balanced&quot;</span>]   <span class="co"># nombre d&#39;échantillons à tirer</span></a>
<a class="sourceLine" id="cb14-64" data-line-number="64">  sample.ids &lt;-<span class="st"> </span><span class="ot">NULL</span>                 <span class="co"># vecteur pour les ID à échantillonner</span></a>
<a class="sourceLine" id="cb14-65" data-line-number="65">  </a>
<a class="sourceLine" id="cb14-66" data-line-number="66">  <span class="co"># Tout d&#39;abord, prend les parcelles avec ...</span></a>
<a class="sourceLine" id="cb14-67" data-line-number="67">  ids.tp &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="op">!</span><span class="kw">is.na</span>(frame.points<span class="op">$</span>trans)               </a>
<a class="sourceLine" id="cb14-68" data-line-number="68">                  <span class="op">&amp;</span><span class="st"> </span>frame.points<span class="op">$</span>trans<span class="op">==</span>alloc[i, <span class="st">&quot;value&quot;</span>]  </a>
<a class="sourceLine" id="cb14-69" data-line-number="69">                  <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(frame.points<span class="op">$</span>ccov))    <span class="co"># couverture houppier connue</span></a>
<a class="sourceLine" id="cb14-70" data-line-number="70">  n.tp   &lt;-<span class="st"> </span><span class="kw">min</span>(<span class="kw">length</span>(ids.tp), strat.n)</a>
<a class="sourceLine" id="cb14-71" data-line-number="71">  <span class="cf">if</span> (n.tp <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) sample.ids &lt;-<span class="st"> </span><span class="kw">c</span>(sample.ids, <span class="kw">sample</span>(ids.tp, n.tp))</a>
<a class="sourceLine" id="cb14-72" data-line-number="72">  </a>
<a class="sourceLine" id="cb14-73" data-line-number="73">  <span class="co"># ... et completer avec autres échantillons de la grille avec </span></a>
<a class="sourceLine" id="cb14-74" data-line-number="74">  ids.r  &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="op">!</span><span class="kw">is.na</span>(frame.points<span class="op">$</span>trans) <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-75" data-line-number="75"><span class="st">                    </span>frame.points<span class="op">$</span>trans<span class="op">==</span>alloc[i, <span class="st">&quot;value&quot;</span>] <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-76" data-line-number="76"><span class="st">                    </span><span class="kw">is.na</span>(frame.points<span class="op">$</span>ccov))     <span class="co"># couverture houppier inconnue</span></a>
<a class="sourceLine" id="cb14-77" data-line-number="77">  n.r    &lt;-<span class="st"> </span><span class="kw">min</span>(<span class="kw">length</span>(ids.r), strat.n <span class="op">-</span><span class="st"> </span>n.tp)</a>
<a class="sourceLine" id="cb14-78" data-line-number="78">  <span class="cf">if</span> (n.r <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) sample.ids &lt;-<span class="st"> </span><span class="kw">c</span>(sample.ids, <span class="kw">sample</span>(ids.r, n.r)) <span class="co"># aléatoirement</span></a>
<a class="sourceLine" id="cb14-79" data-line-number="79">  </a>
<a class="sourceLine" id="cb14-80" data-line-number="80">  <span class="co"># Ajouter aux points de validation</span></a>
<a class="sourceLine" id="cb14-81" data-line-number="81">  val.points &lt;-<span class="st"> </span><span class="kw">rbind</span>(val.points, frame.points[sample.ids, ])</a>
<a class="sourceLine" id="cb14-82" data-line-number="82">}</a>
<a class="sourceLine" id="cb14-83" data-line-number="83"></a>
<a class="sourceLine" id="cb14-84" data-line-number="84"><span class="co"># Mélanger les points de validation et ajouter un identifiant</span></a>
<a class="sourceLine" id="cb14-85" data-line-number="85">val.points &lt;-<span class="st"> </span>val.points[<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(val.points)), ]</a>
<a class="sourceLine" id="cb14-86" data-line-number="86">val.points<span class="op">$</span>SAMPLEID &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;val-&quot;</span>, <span class="kw">str_pad</span>(<span class="dt">string=</span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(val.points), </a>
<a class="sourceLine" id="cb14-87" data-line-number="87">                                              <span class="dt">width =</span> <span class="dv">4</span>, </a>
<a class="sourceLine" id="cb14-88" data-line-number="88">                                              <span class="dt">pad =</span> <span class="st">&quot;0&quot;</span>, </a>
<a class="sourceLine" id="cb14-89" data-line-number="89">                                              <span class="dt">side =</span> <span class="st">&quot;left&quot;</span>))</a>
<a class="sourceLine" id="cb14-90" data-line-number="90"></a>
<a class="sourceLine" id="cb14-91" data-line-number="91"></a>
<a class="sourceLine" id="cb14-92" data-line-number="92"><span class="co"># Conversion des points en parcelles et ajouter des attributs =================</span></a>
<a class="sourceLine" id="cb14-93" data-line-number="93"></a>
<a class="sourceLine" id="cb14-94" data-line-number="94"><span class="co"># Grille Landsat</span></a>
<a class="sourceLine" id="cb14-95" data-line-number="95">landsat.grid &lt;-<span class="st"> </span><span class="kw">raster</span>(change.map)</a>
<a class="sourceLine" id="cb14-96" data-line-number="96"><span class="kw">values</span>(landsat.grid) &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb14-97" data-line-number="97"></a>
<a class="sourceLine" id="cb14-98" data-line-number="98"><span class="co"># Selectionner les pixels Landsat correspondantes et convertir en polygone</span></a>
<a class="sourceLine" id="cb14-99" data-line-number="99">val.plots &lt;-<span class="st"> </span><span class="kw">rasterToPolygons</span>(<span class="kw">mask</span>(landsat.grid, val.points))</a>
<a class="sourceLine" id="cb14-100" data-line-number="100"></a>
<a class="sourceLine" id="cb14-101" data-line-number="101"><span class="co"># Extraire les attributs des points d&#39;entraînement ...</span></a>
<a class="sourceLine" id="cb14-102" data-line-number="102">val.plots<span class="op">@</span>data &lt;-<span class="st"> </span><span class="kw">over</span>(val.plots, val.points[, <span class="kw">c</span>(<span class="st">&quot;PLOTID&quot;</span>, <span class="st">&quot;SAMPLEID&quot;</span>, </a>
<a class="sourceLine" id="cb14-103" data-line-number="103">                                                 <span class="st">&quot;xcoords&quot;</span>, <span class="st">&quot;ycoords&quot;</span>, </a>
<a class="sourceLine" id="cb14-104" data-line-number="104">                                                 <span class="st">&quot;trans&quot;</span>, <span class="st">&quot;ccov&quot;</span>, </a>
<a class="sourceLine" id="cb14-105" data-line-number="105">                                                 <span class="st">&quot;img_src&quot;</span>, <span class="st">&quot;img_date&quot;</span>, </a>
<a class="sourceLine" id="cb14-106" data-line-number="106">                                                 <span class="st">&quot;author&quot;</span>, <span class="st">&quot;mod_date&quot;</span>)])</a>
<a class="sourceLine" id="cb14-107" data-line-number="107"></a>
<a class="sourceLine" id="cb14-108" data-line-number="108"><span class="co"># ... convertir couverture des houppiers disponibles en %, les autres NA</span></a>
<a class="sourceLine" id="cb14-109" data-line-number="109">val.plots<span class="op">$</span>ccov  &lt;-<span class="st"> </span><span class="kw">format</span>(<span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>val.plots<span class="op">$</span>ccov, <span class="dv">1</span>)) </a>
<a class="sourceLine" id="cb14-110" data-line-number="110">val.plots<span class="op">$</span>ccov[val.plots<span class="op">$</span>ccov <span class="op">==</span><span class="st"> &quot;  NA&quot;</span>]&lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb14-111" data-line-number="111"></a>
<a class="sourceLine" id="cb14-112" data-line-number="112"><span class="co"># ... et compléter avec attributs occupation des terre 1987, 2003, 2015 et 2018</span></a>
<a class="sourceLine" id="cb14-113" data-line-number="113">val.plots<span class="op">$</span>lc_<span class="dv">18</span>   &lt;-<span class="st"> </span>val.plots<span class="op">$</span>lc_<span class="dv">15</span>    &lt;-<span class="st"> </span><span class="kw">as.character</span>(<span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb14-114" data-line-number="114">val.plots<span class="op">$</span>lc_<span class="dv">03</span>   &lt;-<span class="st"> </span>val.plots<span class="op">$</span>lc_<span class="dv">87</span>    &lt;-<span class="st"> </span><span class="kw">as.character</span>(<span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb14-115" data-line-number="115"></a>
<a class="sourceLine" id="cb14-116" data-line-number="116"><span class="co"># Sauvegarder parcelles sous format Shapefile et KML</span></a>
<a class="sourceLine" id="cb14-117" data-line-number="117"><span class="kw">writeOGR</span>(val.plots, <span class="dt">dsn=</span><span class="st">&quot;.&quot;</span>, <span class="dt">layer=</span><span class="st">&quot;UOT_parcelles&quot;</span>, <span class="dt">driver=</span><span class="st">&quot;ESRI Shapefile&quot;</span>, <span class="dt">overwrite=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-118" data-line-number="118"><span class="kw">writeKML</span>(val.plots, <span class="dt">kmlname=</span><span class="st">&quot;UOT_parcelles&quot;</span>, <span class="dt">filename=</span><span class="st">&quot;UOT_parcelles.kml&quot;</span>)</a>
<a class="sourceLine" id="cb14-119" data-line-number="119"></a>
<a class="sourceLine" id="cb14-120" data-line-number="120"></a>
<a class="sourceLine" id="cb14-121" data-line-number="121"><span class="co"># Créer une grille d&#39;échantillon 7x7 dans chaque parcelle =====================</span></a>
<a class="sourceLine" id="cb14-122" data-line-number="122"></a>
<a class="sourceLine" id="cb14-123" data-line-number="123"><span class="co"># Détérminer la grille</span></a>
<a class="sourceLine" id="cb14-124" data-line-number="124">grid.size &lt;-<span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb14-125" data-line-number="125">res &lt;-<span class="st"> </span><span class="kw">res</span>(landsat.grid)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb14-126" data-line-number="126">offset &lt;-<span class="st"> </span><span class="kw">c</span>(res<span class="op">/</span>grid.size<span class="op">/</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">0</span><span class="op">:</span>(grid.size<span class="dv">-1</span>))<span class="op">*</span>res<span class="op">/</span>grid.size)</a>
<a class="sourceLine" id="cb14-127" data-line-number="127"></a>
<a class="sourceLine" id="cb14-128" data-line-number="128"><span class="co"># Diviser les parcelles pour un traitement parallèle</span></a>
<a class="sourceLine" id="cb14-129" data-line-number="129">subsets &lt;-<span class="st"> </span><span class="kw">split</span>(val.plots, <span class="dt">f=</span><span class="dv">1</span><span class="op">:</span><span class="dv">86</span>)</a>
<a class="sourceLine" id="cb14-130" data-line-number="130"><span class="kw">registerDoParallel</span>(CORES<span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb14-131" data-line-number="131">val.grids &lt;-<span class="st"> </span><span class="kw">foreach</span>(<span class="dt">subset=</span>subsets, <span class="dt">.combine=</span>bind, <span class="dt">.multicombine=</span><span class="ot">TRUE</span>) <span class="op">%dopar%</span><span class="st"> </span>{ </a>
<a class="sourceLine" id="cb14-132" data-line-number="132">  <span class="co"># Créer un couche de points vides ...</span></a>
<a class="sourceLine" id="cb14-133" data-line-number="133">  grids &lt;-<span class="st"> </span><span class="kw">SpatialPointsDataFrame</span>(<span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">0</span>, <span class="dt">y =</span> <span class="dv">0</span>), </a>
<a class="sourceLine" id="cb14-134" data-line-number="134">                                  <span class="dt">data=</span><span class="kw">data.frame</span>(<span class="dt">PLOTID =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb14-135" data-line-number="135">                                                  <span class="dt">SAMPLEID =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb14-136" data-line-number="136">                                                  <span class="dt">GRIDPOINT =</span> <span class="dv">0</span>))[<span class="op">-</span><span class="dv">1</span>,]</a>
<a class="sourceLine" id="cb14-137" data-line-number="137">  <span class="co"># ... et ajoute la grille d&#39;échantillon pour chaque parcelle</span></a>
<a class="sourceLine" id="cb14-138" data-line-number="138">  <span class="cf">for</span>(p <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(subset)) {</a>
<a class="sourceLine" id="cb14-139" data-line-number="139">    plot &lt;-<span class="st"> </span>subset[p,]</a>
<a class="sourceLine" id="cb14-140" data-line-number="140">    ext &lt;-<span class="st"> </span><span class="kw">extent</span>(plot)</a>
<a class="sourceLine" id="cb14-141" data-line-number="141">    grids &lt;-<span class="st"> </span><span class="kw">bind</span>(grids, <span class="kw">SpatialPointsDataFrame</span>(<span class="kw">expand.grid</span>(ext<span class="op">@</span>xmin<span class="op">+</span>offset, ext<span class="op">@</span>ymin<span class="op">+</span>offset), </a>
<a class="sourceLine" id="cb14-142" data-line-number="142">                                                <span class="dt">data=</span><span class="kw">data.frame</span>(<span class="dt">PLOTID =</span> plot<span class="op">$</span>PLOTID, </a>
<a class="sourceLine" id="cb14-143" data-line-number="143">                                                                <span class="dt">SAMPLEID =</span> plot<span class="op">$</span>SAMPLEID,</a>
<a class="sourceLine" id="cb14-144" data-line-number="144">                                                                <span class="dt">GRIDPOINT =</span> <span class="dv">1</span><span class="op">:</span>grid.size<span class="op">^</span><span class="dv">2</span>)))</a>
<a class="sourceLine" id="cb14-145" data-line-number="145">  }</a>
<a class="sourceLine" id="cb14-146" data-line-number="146">  grids</a>
<a class="sourceLine" id="cb14-147" data-line-number="147">}</a>
<a class="sourceLine" id="cb14-148" data-line-number="148"></a>
<a class="sourceLine" id="cb14-149" data-line-number="149"><span class="co"># Appliquer le système de référence des coordonnées</span></a>
<a class="sourceLine" id="cb14-150" data-line-number="150"><span class="kw">proj4string</span>(val.grids) &lt;-<span class="st"> </span><span class="kw">proj4string</span>(val.plots)</a>
<a class="sourceLine" id="cb14-151" data-line-number="151"></a>
<a class="sourceLine" id="cb14-152" data-line-number="152"><span class="co"># fusionner avec les attributs (arbre, oui ou non?) déjà collectés </span></a>
<a class="sourceLine" id="cb14-153" data-line-number="153">train.grids &lt;-<span class="st"> </span><span class="kw">readOGR</span>(<span class="kw">paste0</span>(DIR.SST.BDD, <span class="st">&quot;/02_train-plots/assessed/COV_parcelles_grid.shp&quot;</span>))</a>
<a class="sourceLine" id="cb14-154" data-line-number="154">val.grids &lt;-<span class="st"> </span><span class="kw">merge</span>(val.grids, </a>
<a class="sourceLine" id="cb14-155" data-line-number="155">                   train.grids<span class="op">@</span>data[, <span class="kw">c</span>(<span class="st">&quot;PLOTID&quot;</span>, <span class="st">&quot;GRIDPOINT&quot;</span>, <span class="st">&quot;tree&quot;</span>)], </a>
<a class="sourceLine" id="cb14-156" data-line-number="156">                   <span class="dt">all.x=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-157" data-line-number="157"></a>
<a class="sourceLine" id="cb14-158" data-line-number="158"><span class="co"># Sauveguarder les grille d&#39;échantillon sous format Shapefile</span></a>
<a class="sourceLine" id="cb14-159" data-line-number="159"><span class="kw">writeOGR</span>(val.grids, <span class="dt">dsn=</span>OUT.DIR, <span class="dt">layer=</span><span class="st">&quot;UOT_parcelles_grid&quot;</span>, <span class="dt">driver=</span><span class="st">&quot;ESRI Shapefile&quot;</span>, <span class="dt">overwrite=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-160" data-line-number="160"></a>
<a class="sourceLine" id="cb14-161" data-line-number="161"></a>
<a class="sourceLine" id="cb14-162" data-line-number="162"><span class="co"># Diviser parcelles et grilles d&#39;échantillon en 10 sous-ensembles =============</span></a>
<a class="sourceLine" id="cb14-163" data-line-number="163"><span class="co"># pour le traitement par différents photo-interprètes</span></a>
<a class="sourceLine" id="cb14-164" data-line-number="164"></a>
<a class="sourceLine" id="cb14-165" data-line-number="165">subsets &lt;-<span class="st"> </span><span class="kw">split</span>(val.plots, <span class="dt">f=</span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb14-166" data-line-number="166"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(subsets)) {</a>
<a class="sourceLine" id="cb14-167" data-line-number="167">  <span class="co"># Sauvegarder parcelles sous format Shapefile et KML</span></a>
<a class="sourceLine" id="cb14-168" data-line-number="168">  <span class="kw">writeOGR</span>(subsets[[i]], <span class="dt">dsn=</span>OUT.DIR, <span class="dt">layer=</span><span class="kw">paste0</span>(<span class="st">&quot;UOT_parcelles_&quot;</span>, i), </a>
<a class="sourceLine" id="cb14-169" data-line-number="169">           <span class="dt">driver=</span><span class="st">&quot;ESRI Shapefile&quot;</span>, <span class="dt">overwrite=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-170" data-line-number="170">  <span class="kw">writeKML</span>(subsets[[i]], <span class="dt">kmlname=</span><span class="kw">paste0</span>(<span class="st">&quot;UOT_parcelles_&quot;</span>, i) , </a>
<a class="sourceLine" id="cb14-171" data-line-number="171">           <span class="dt">filename=</span><span class="kw">paste0</span>(<span class="st">&quot;UOT_parcelles_&quot;</span>, i, <span class="st">&quot;.kml&quot;</span>))</a>
<a class="sourceLine" id="cb14-172" data-line-number="172">  <span class="co"># Sauvegarder les grilles correspondantes sous format Shapefile</span></a>
<a class="sourceLine" id="cb14-173" data-line-number="173">  subset.grids &lt;-<span class="st"> </span>val.grids[val.grids<span class="op">$</span>PLOTID <span class="op">%in%</span><span class="st"> </span>subsets[[i]]<span class="op">$</span>PLOTID,]</a>
<a class="sourceLine" id="cb14-174" data-line-number="174">  <span class="kw">writeOGR</span>(subset.grids, <span class="dt">dsn=</span>OUT.DIR, <span class="dt">layer=</span><span class="kw">paste0</span>(<span class="st">&quot;UOT_parcelles_&quot;</span>, i, <span class="st">&quot;_grid&quot;</span>), </a>
<a class="sourceLine" id="cb14-175" data-line-number="175">           <span class="dt">driver=</span><span class="st">&quot;ESRI Shapefile&quot;</span>, <span class="dt">overwrite=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-176" data-line-number="176">}</a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="02_training-plots.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="04_outil-QGIS.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
